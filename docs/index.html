<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Load a basic WebMap - 4.28</title>

  <style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>

  <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/css/main.css">

  <script src="https://js.arcgis.com/4.28/"></script>

  <script>
     require([
      "esri/Map",
      "esri/views/MapView",
         "esri/layers/ImageryLayer",
      "esri/layers/MapImageLayer"
     ], 
    function(
Map, MapView,ImageryLayer, MapImageLayer
    ) {

     var mymap = new Map({
         basemap: "gray",
         //layers:[myImage2]
      });
      
     var view = new MapView({
         container: "viewDiv",
         map: mymap,
         center: [-98.585522, 39.8333333],
         zoom:4
     });

         
          var myImage = new ImageryLayer({
          url: "https://elevation.nationalmap.gov/arcgis/rest/services/3DEPElevation/ImageServer"
        });
         mymap.add(myImage);
         
         var myImage2 = new ImageryLayer({
          url: "https://imagery.nationalmap.gov/arcgis/rest/services/USGSNAIPPlus/ImageServer"
        });
         mymap.add(myImage2);
         
         /*let url = "https://imagery.nationalmap.gov/arcgis/rest/services/USGSNAIPPlus/ImageServer";

esriRequest(url, {
  responseType: "raster"
}).then(function(response){
  // The requested data
  var raster = response.data;
});*/
       //var portalUrl;
        //esriConfig.portalUrl = "https://imagery.nationalmap.gov/arcgis/rest/services/USGSNAIPPlus/ImageServer";

/*esriConfig.request.interceptors.push({
  // set the `urls` property to the URL of the FeatureLayer so that this
  // interceptor only applies to requests made to the FeatureLayer URL
  urls: featureLayerUrl,
  // use the AfterInterceptorCallback to check if `ssl` is set to 'true'
  // on the response to the request, if it's set to 'false', change
  // the value to 'true' before returning the response
  after: function(response) {
    if (!response.ssl) {
      response.ssl = true;
    }
  }
})*/

      /*var myImage2 = new MapImageLayer({
          url: url,//portalUrl,"https://imagery.nationalmap.gov/arcgis/rest/services/USGSNAIPPlus/ImageServer",
          //anonimous:true,
          minScale: 2000000,
          sublayers:[{
            id: 33
          }]
        });
         mymap.add(myImage2);
         
         urlUtils.addProxyRule({
    urlPrefix: "https://earthquake.usgs.gov/arcgis/rest/services/eq/scenarios/MapServer",
    proxyUrl: "https://mojicamyers.github.io/GISApps/"
  });*/
        
         var img = new MapImageLayer({
          url: "https://earthquake.usgs.gov/arcgis/rest/services/eq/scenarios/MapServer",
          //minScale: 2000000,
          sublayers: [{
            id: 2,
            title: "Mercally Intensity",
          },{
              id:1, 
              title:"Ruptures"
          }, {
              id:0,
              title:"epicenters"
          }]
        });
         
         
mymap.add(img);
         
    });
  </script>
</head>

<body>
  <div id="viewDiv"></div>
</body>

</html>